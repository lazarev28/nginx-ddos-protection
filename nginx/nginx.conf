worker_processes 1;

events {
    worker_connections 1024;
}

http {
    limit_req_zone $binary_remote_addr zone=back:10m rate=10r/s;

 server {
        listen 80;
        server_name localhost;

        location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|eot|json)$ {
            proxy_pass http://flask-app:5080;
        }

        location ~* ^/(?!.*\.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|eot|json)$) {
            limit_req zone=back burst=20 nodelay;
            proxy_pass http://flask-app:5080;
        }

    }
}

